Run appleboy/ssh-action@v1.0.3
  with:
    host: ***
    username: ***
    key: ***
  
    port: 22
    script: cd ***
  
  echo "üîÑ Pulling latest changes from staging branch..."
  git fetch origin
  git reset --hard origin/staging
  
  echo "üìã Copying environment template..."
  cp .env.staging.template .env
  
  echo "‚öôÔ∏è Updating environment with secrets..."
  sed -i 's/***/***/g' .env
  sed -i 's/your_db_password/***/g' .env
  sed -i 's/***/***/g' .env
  sed -i 's|https://your-staging-domain.com|***|g' .env
  
  echo "üöÄ Running deployment script..."
  chmod +x deploy-staging.sh
  ./deploy-staging.sh
  
  echo "‚úÖ Staging deployment completed successfully!"
    timeout: 30s
    command_timeout: 10m
    proxy_port: 22
    proxy_timeout: 30s
  env:
    COMPOSER_PROCESS_TIMEOUT: 0
    COMPOSER_NO_INTERACTION: 1
    COMPOSER_NO_AUDIT: 1
/usr/bin/docker run --name feb2876e1f13cc1af4498bce38bab03ce98c6_a92f0c --label 4feb28 --workdir /github/workspace --rm -e "COMPOSER_PROCESS_TIMEOUT" -e "COMPOSER_NO_INTERACTION" -e "COMPOSER_NO_AUDIT" -e "INPUT_HOST" -e "INPUT_USERNAME" -e "INPUT_KEY" -e "INPUT_PORT" -e "INPUT_SCRIPT" -e "INPUT_PASSPHRASE" -e "INPUT_PASSWORD" -e "INPUT_SYNC" -e "INPUT_USE_INSECURE_CIPHER" -e "INPUT_CIPHER" -e "INPUT_TIMEOUT" -e "INPUT_COMMAND_TIMEOUT" -e "INPUT_KEY_PATH" -e "INPUT_FINGERPRINT" -e "INPUT_PROXY_HOST" -e "INPUT_PROXY_PORT" -e "INPUT_PROXY_USERNAME" -e "INPUT_PROXY_PASSWORD" -e "INPUT_PROXY_PASSPHRASE" -e "INPUT_PROXY_TIMEOUT" -e "INPUT_PROXY_KEY" -e "INPUT_PROXY_KEY_PATH" -e "INPUT_PROXY_FINGERPRINT" -e "INPUT_PROXY_CIPHER" -e "INPUT_PROXY_USE_INSECURE_CIPHER" -e "INPUT_SCRIPT_STOP" -e "INPUT_ENVS" -e "INPUT_ENVS_FORMAT" -e "INPUT_DEBUG" -e "INPUT_ALLENVS" -e "INPUT_REQUEST_PTY" -e "HOME" -e "GITHUB_JOB" -e "GITHUB_REF" -e "GITHUB_SHA" -e "GITHUB_REPOSITORY" -e "GITHUB_REPOSITORY_OWNER" -e "GITHUB_REPOSITORY_OWNER_ID" -e "GITHUB_RUN_ID" -e "GITHUB_RUN_NUMBER" -e "GITHUB_RETENTION_DAYS" -e "GITHUB_RUN_ATTEMPT" -e "GITHUB_ACTOR_ID" -e "GITHUB_ACTOR" -e "GITHUB_WORKFLOW" -e "GITHUB_HEAD_REF" -e "GITHUB_BASE_REF" -e "GITHUB_EVENT_NAME" -e "GITHUB_SERVER_URL" -e "GITHUB_API_URL" -e "GITHUB_GRAPHQL_URL" -e "GITHUB_REF_NAME" -e "GITHUB_REF_PROTECTED" -e "GITHUB_REF_TYPE" -e "GITHUB_WORKFLOW_REF" -e "GITHUB_WORKFLOW_SHA" -e "GITHUB_REPOSITORY_ID" -e "GITHUB_TRIGGERING_ACTOR" -e "GITHUB_WORKSPACE" -e "GITHUB_ACTION" -e "GITHUB_EVENT_PATH" -e "GITHUB_ACTION_REPOSITORY" -e "GITHUB_ACTION_REF" -e "GITHUB_PATH" -e "GITHUB_ENV" -e "GITHUB_STEP_SUMMARY" -e "GITHUB_STATE" -e "GITHUB_OUTPUT" -e "RUNNER_OS" -e "RUNNER_ARCH" -e "RUNNER_NAME" -e "RUNNER_ENVIRONMENT" -e "RUNNER_TOOL_CACHE" -e "RUNNER_TEMP" -e "RUNNER_WORKSPACE" -e "ACTIONS_RUNTIME_URL" -e "ACTIONS_RUNTIME_TOKEN" -e "ACTIONS_CACHE_URL" -e "ACTIONS_RESULTS_URL" -e GITHUB_ACTIONS=true -e CI=true -v "/var/run/docker.sock":"/var/run/docker.sock" -v "/home/runner/work/_temp/_github_home":"/github/home" -v "/home/runner/work/_temp/_github_workflow":"/github/workflow" -v "/home/runner/work/_temp/_runner_file_commands":"/github/file_commands" -v "/home/runner/work/vehicle-inspection-system/vehicle-inspection-system":"/github/workspace" 4feb28:76e1f13cc1af4498bce38bab03ce98c6
======CMD======
cd ***

echo "üîÑ Pulling latest changes from staging branch..."
git fetch origin
git reset --hard origin/staging

echo "üìã Copying environment template..."
cp .env.staging.template .env

echo "‚öôÔ∏è Updating environment with secrets..."
sed -i 's/***/***/g' .env
sed -i 's/your_db_password/***/g' .env
sed -i 's/***/***/g' .env
sed -i 's|https://your-staging-domain.com|***|g' .env

echo "üöÄ Running deployment script..."
chmod +x deploy-staging.sh
./deploy-staging.sh

echo "‚úÖ Staging deployment completed successfully!"
======END======
2025/08/20 14:11:00 dial tcp ***:22: i/o timeout